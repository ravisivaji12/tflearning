<!-- BEGIN_TF_DOCS -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.9, < 2.0 |
| <a name="requirement_azapi"></a> [azapi](#requirement\_azapi) | ~> 2.0 |
| <a name="requirement_azurerm"></a> [azurerm](#requirement\_azurerm) | >= 3.116, < 5.0 |
| <a name="requirement_random"></a> [random](#requirement\_random) | ~> 3.7 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_azurerm"></a> [azurerm](#provider\_azurerm) | >= 3.116, < 5.0 |
| <a name="provider_random"></a> [random](#provider\_random) | ~> 3.7 |

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_MF_MDI-rt"></a> [MF\_MDI-rt](#module\_MF\_MDI-rt) | Azure/avm-res-network-routetable/azurerm | 0.4.1 |
| <a name="module_MF_MDI_CC_RG"></a> [MF\_MDI\_CC\_RG](#module\_MF\_MDI\_CC\_RG) | Azure/avm-res-resources-resourcegroup/azurerm | 0.2.1 |
| <a name="module_avm-res-compute-virtualmachine"></a> [avm-res-compute-virtualmachine](#module\_avm-res-compute-virtualmachine) | Azure/avm-res-compute-virtualmachine/azurerm | 0.19.3 |
| <a name="module_avm-res-network-virtualnetwork"></a> [avm-res-network-virtualnetwork](#module\_avm-res-network-virtualnetwork) | Azure/avm-res-network-virtualnetwork/azurerm | 0.8.1 |
| <a name="module_avm_res_keyvault_vault"></a> [avm\_res\_keyvault\_vault](#module\_avm\_res\_keyvault\_vault) | Azure/avm-res-keyvault-vault/azurerm | =0.10.0 |
| <a name="module_log_analytics_workspace"></a> [log\_analytics\_workspace](#module\_log\_analytics\_workspace) | Azure/avm-res-operationalinsights-workspace/azurerm | 0.4.2 |
| <a name="module_nsg"></a> [nsg](#module\_nsg) | Azure/avm-res-network-networksecuritygroup/azurerm | 0.4.0 |
| <a name="module_recovery_services_vault"></a> [recovery\_services\_vault](#module\_recovery\_services\_vault) | ./modules/recovery_services_vault | n/a |
| <a name="module_storage_account"></a> [storage\_account](#module\_storage\_account) | Azure/avm-res-storage-storageaccount/azurerm | 0.5.0 |

## Resources

| Name | Type |
|------|------|
| [azurerm_role_assignment.iac-spn-key-vault-officer-assignment](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/role_assignment) | resource |
| [azurerm_user_assigned_identity.mf-core-dc-uaid](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/user_assigned_identity) | resource |
| [random_password.admin_password](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/password) | resource |
| [azurerm_client_config.current](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/client_config) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_NIC_subnet_key"></a> [NIC\_subnet\_key](#input\_NIC\_subnet\_key) | Key for the NIC subnet in the domain controller VNet | `string` | n/a | yes |
| <a name="input_backup_policy_identifier"></a> [backup\_policy\_identifier](#input\_backup\_policy\_identifier) | The value of key used for the backup policy so it can be referenced in the code to fetch its id | `string` | n/a | yes |
| <a name="input_cc_resource_group"></a> [cc\_resource\_group](#input\_cc\_resource\_group) | Resource Group | <pre>object({<br>    name     = string<br>    location = string<br>    tags     = optional(map(string), {})<br>    lock = optional(object({<br>      level = string<br>      notes = optional(string)<br>    }), null)<br>  })</pre> | n/a | yes |
| <a name="input_cc_vnet"></a> [cc\_vnet](#input\_cc\_vnet) | Virtual network | <pre>object({<br>    name                = string<br>    resource_group_name = string<br>    location            = string<br>    address_space       = list(string)<br>    subnets = map(object({<br>      name                              = string<br>      address_prefixes                  = list(string)<br>      service_endpoints                 = list(string)<br>      default_outbound_access_enabled   = bool<br>      private_endpoint_network_policies = string<br>      delegation = list(object({<br>        name = string<br>        service_delegation = object({<br>          name = string<br>        actions = list(string) })<br>      }))<br>      network_security_group = object({ id = string })<br>      route_table            = object({ id = string })<br>    }))<br>  })</pre> | n/a | yes |
| <a name="input_cfg_core_infrastructure_subscription_id"></a> [cfg\_core\_infrastructure\_subscription\_id](#input\_cfg\_core\_infrastructure\_subscription\_id) | Subscription ID for the core infrastructure | `string` | `"65763622-4bd1-45e6-82fc-2f11e3663439"` | no |
| <a name="input_cfg_tenant_id"></a> [cfg\_tenant\_id](#input\_cfg\_tenant\_id) | Tenant ID for the configuration | `string` | `"59fa7797-abec-4505-81e6-8ce092642190"` | no |
| <a name="input_default_udr_routes"></a> [default\_udr\_routes](#input\_default\_udr\_routes) | Default UDR routes to be applied to domain controller route tables | <pre>map(object({<br>    name                   = string<br>    address_prefix         = string<br>    next_hop_type          = string<br>    next_hop_in_ip_address = optional(string)<br>  }))</pre> | <pre>{<br>  "internet-to-Firewall": {<br>    "address_prefix": "0.0.0.0/0",<br>    "name": "Internet",<br>    "next_hop_in_ip_address": "10.125.251.4",<br>    "next_hop_type": "VirtualAppliance"<br>  }<br>}</pre> | no |
| <a name="input_disk_encryption_set_config_key"></a> [disk\_encryption\_set\_config\_key](#input\_disk\_encryption\_set\_config\_key) | n/a | `string` | n/a | yes |
| <a name="input_disk_encryption_sets"></a> [disk\_encryption\_sets](#input\_disk\_encryption\_sets) | n/a | <pre>object({<br>    name                = string<br>    location            = string<br>    resource_group_name = string<br>    key_vault_key_name  = string<br>    identity_name       = string<br>  })</pre> | n/a | yes |
| <a name="input_domain_controller_default_nsg_rules"></a> [domain\_controller\_default\_nsg\_rules](#input\_domain\_controller\_default\_nsg\_rules) | Default rules to be applied to domain controller NSG | <pre>map(object({<br>    access                                     = string<br>    description                                = optional(string)<br>    destination_address_prefix                 = optional(string)<br>    destination_address_prefixes               = optional(set(string))<br>    destination_application_security_group_ids = optional(set(string))<br>    destination_port_range                     = optional(string)<br>    destination_port_ranges                    = optional(set(string))<br>    direction                                  = string<br>    name                                       = string<br>    priority                                   = number<br>    protocol                                   = string<br>    source_address_prefix                      = optional(string)<br>    source_address_prefixes                    = optional(set(string))<br>    source_application_security_group_ids      = optional(set(string))<br>    source_port_range                          = optional(string)<br>    source_port_ranges                         = optional(set(string))<br>    timeouts = optional(object({<br>      create = optional(string)<br>      delete = optional(string)<br>      read   = optional(string)<br>      update = optional(string)<br>    }))<br>  }))</pre> | <pre>{<br>  "AllowRDP": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "3389",<br>    "direction": "Inbound",<br>    "name": "AllowRDP",<br>    "priority": 100,<br>    "protocol": "Tcp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "icmp_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "*",<br>    "direction": "Inbound",<br>    "name": "AD_Icmp_to_DC_Inbound",<br>    "priority": 127,<br>    "protocol": "Icmp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "tcp_135_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "135",<br>    "direction": "Inbound",<br>    "name": "AD_135_RPC_TCP_-_DC_Inbound",<br>    "priority": 115,<br>    "protocol": "Tcp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "tcp_135_dc_outbound": {<br>    "access": "Allow",<br>    "destination_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "destination_port_range": "135",<br>    "direction": "Outbound",<br>    "name": "AD_135_RPC_TCP_-_DC_Outbound",<br>    "priority": 135,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "tcp_139_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "139",<br>    "direction": "Inbound",<br>    "name": "AD_139_NetLogon_TCP_-_DC_Inbound",<br>    "priority": 117,<br>    "protocol": "Udp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "tcp_139_dc_outbound": {<br>    "access": "Allow",<br>    "destination_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "destination_port_range": "139",<br>    "direction": "Outbound",<br>    "name": "AD_139_NetLogon_TCP_-_DC_Outbound",<br>    "priority": 137,<br>    "protocol": "Udp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "tcp_3268-3269_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "3268-3269",<br>    "direction": "Inbound",<br>    "name": "AD_3268-3269_LDAP_GC_TCP_-_DC_Inbound",<br>    "priority": 124,<br>    "protocol": "Tcp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "tcp_389_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "389",<br>    "direction": "Inbound",<br>    "name": "AD_389_LDAP_TCP_-_DC_Inbound",<br>    "priority": 118,<br>    "protocol": "Tcp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "tcp_389_dc_outbound": {<br>    "access": "Allow",<br>    "destination_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "destination_port_range": "389",<br>    "direction": "Outbound",<br>    "name": "AD_389_LDAP_TCP_-_DC_Outbound",<br>    "priority": 138,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "tcp_445_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "445",<br>    "direction": "Inbound",<br>    "name": "AD_445_SMB_TCP_-_DC_Inbound",<br>    "priority": 120,<br>    "protocol": "Tcp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "tcp_445_dc_outbound": {<br>    "access": "Allow",<br>    "destination_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "destination_port_range": "445",<br>    "direction": "Outbound",<br>    "name": "AD_445_SMB_TCP_-_DC_Outbound",<br>    "priority": 141,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "tcp_464_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "464",<br>    "direction": "Inbound",<br>    "name": "AD_464_Kerberos_Authentication_TCP_-_DC_Inbound",<br>    "priority": 121,<br>    "protocol": "Tcp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "tcp_464_dc_outbound": {<br>    "access": "Allow",<br>    "destination_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "destination_port_range": "464",<br>    "direction": "Outbound",<br>    "name": "AD_464_Kerberos_Authentication_TCP_-_DC_Outbound",<br>    "priority": 142,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "tcp_49152-65535_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "49152-65535",<br>    "direction": "Inbound",<br>    "name": "AD_49152-65535_TCP_-_DC_Inbound",<br>    "priority": 125,<br>    "protocol": "Tcp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "tcp_53_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "53",<br>    "direction": "Inbound",<br>    "name": "AD_53_DNS_TCP_-_DC_Inbound",<br>    "priority": 110,<br>    "protocol": "Tcp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "tcp_53_dc_outbound": {<br>    "access": "Allow",<br>    "destination_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "destination_port_range": "53",<br>    "direction": "Outbound",<br>    "name": "AD_53_DNS_TCP_-_DC_Outbound",<br>    "priority": 130,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "tcp_636_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "636",<br>    "direction": "Inbound",<br>    "name": "AD_636_LDAP_SSL_TCP_-_DC_Inbound",<br>    "priority": 123,<br>    "protocol": "Tcp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "tcp_636_dc_outbound": {<br>    "access": "Allow",<br>    "destination_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "destination_port_range": "9389",<br>    "direction": "Outbound",<br>    "name": "AD_DS_Web_Services",<br>    "priority": 146,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "tcp_88_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "88",<br>    "direction": "Inbound",<br>    "name": "AD_88_Kerberos_TCP_-_DC_Inbound",<br>    "priority": 112,<br>    "protocol": "Tcp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "tcp_88_dc_outbound": {<br>    "access": "Allow",<br>    "destination_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "destination_port_range": "88",<br>    "direction": "Outbound",<br>    "name": "AD_88_Kerberos_TCP_-_DC_Outbound",<br>    "priority": 132,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "udp_123_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "123",<br>    "direction": "Inbound",<br>    "name": "AD_123_W32Time_UDP_-_DC_Inbound",<br>    "priority": 114,<br>    "protocol": "Udp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "udp_123_dc_outbound": {<br>    "access": "Allow",<br>    "destination_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "destination_port_range": "123",<br>    "direction": "Outbound",<br>    "name": "AD_123_W32Time_UDP_-_DC_Outbound",<br>    "priority": 134,<br>    "protocol": "Udp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "udp_137-138_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "137-138",<br>    "direction": "Inbound",<br>    "name": "AD_137-138_NetLogon_UDP_-_DC_Inbound",<br>    "priority": 116,<br>    "protocol": "Udp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "udp_137-138_dc_outbound": {<br>    "access": "Allow",<br>    "destination_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "destination_port_range": "137-138",<br>    "direction": "Outbound",<br>    "name": "AD_137-138_NetLogon_UDP_-_DC_Outbound",<br>    "priority": 136,<br>    "protocol": "Udp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "udp_389_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "389",<br>    "direction": "Inbound",<br>    "name": "AD_389_LDAP_UDP_-_DC_Inbound",<br>    "priority": 119,<br>    "protocol": "Udp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "udp_389_dc_outbound": {<br>    "access": "Allow",<br>    "destination_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "destination_port_range": "389",<br>    "direction": "Outbound",<br>    "name": "AD_389_LDAP_UDP_-_DC_Outbound",<br>    "priority": 139,<br>    "protocol": "Udp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "udp_464_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "464",<br>    "direction": "Inbound",<br>    "name": "AD_464_Kerberos_Authentication_UDP_-_DC_Inbound",<br>    "priority": 122,<br>    "protocol": "Udp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "udp_464_dc_outbound": {<br>    "access": "Allow",<br>    "destination_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "destination_port_range": "464",<br>    "direction": "Outbound",<br>    "name": "AD_464_Kerberos_Authentication_UDP_-_DC_Outbound",<br>    "priority": 143,<br>    "protocol": "Udp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "udp_49152-65535_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "49152-65535",<br>    "direction": "Inbound",<br>    "name": "AD_49152-65535_UDP_-_DC_Inbound",<br>    "priority": 126,<br>    "protocol": "Udp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "udp_53_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "53",<br>    "direction": "Inbound",<br>    "name": "AD_53_DNS_UDP_-_DC_Inbound",<br>    "priority": 111,<br>    "protocol": "Udp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "udp_53_dc_outbound": {<br>    "access": "Allow",<br>    "destination_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "destination_port_range": "53",<br>    "direction": "Outbound",<br>    "name": "AD_53_DNS_UDP_-_DC_Outbound",<br>    "priority": 131,<br>    "protocol": "Udp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "udp_88_dc_inbound": {<br>    "access": "Allow",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "88",<br>    "direction": "Inbound",<br>    "name": "AD_88_Kerberos_UDP_-_DC_Inbound",<br>    "priority": 113,<br>    "protocol": "Udp",<br>    "source_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "source_port_range": "*"<br>  },<br>  "udp_88_dc_outbound": {<br>    "access": "Allow",<br>    "destination_address_prefixes": [<br>      "172.16.0.0/12",<br>      "10.122.0.0/15",<br>      "10.124.0.0/15"<br>    ],<br>    "destination_port_range": "88",<br>    "direction": "Outbound",<br>    "name": "AD_88_Kerberos_UDP_-_DC_Outbound",<br>    "priority": 133,<br>    "protocol": "Udp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  }<br>}</pre> | no |
| <a name="input_enable_peering"></a> [enable\_peering](#input\_enable\_peering) | Flag to enable peering between the domain controller VNet and the hub VNet | `bool` | `true` | no |
| <a name="input_enable_telemetry"></a> [enable\_telemetry](#input\_enable\_telemetry) | Flag for enabling telemetry for the AVM Modules | `bool` | `false` | no |
| <a name="input_encryption_key_name"></a> [encryption\_key\_name](#input\_encryption\_key\_name) | Name of the encryption key to be used for disk encryption | `string` | n/a | yes |
| <a name="input_hub_vnet_id"></a> [hub\_vnet\_id](#input\_hub\_vnet\_id) | Resource ID of the hub virtual network | `string` | n/a | yes |
| <a name="input_hub_vnet_name"></a> [hub\_vnet\_name](#input\_hub\_vnet\_name) | Name of the hub virtual network | `string` | n/a | yes |
| <a name="input_identity_key"></a> [identity\_key](#input\_identity\_key) | Key for the user assigned identity to be used for CMK encryption | `string` | n/a | yes |
| <a name="input_key_vault_key"></a> [key\_vault\_key](#input\_key\_vault\_key) | n/a | `string` | n/a | yes |
| <a name="input_key_vault_private_dns_zone_resource_id"></a> [key\_vault\_private\_dns\_zone\_resource\_id](#input\_key\_vault\_private\_dns\_zone\_resource\_id) | Resource ID of the Key Vault private DNS zone | `string` | n/a | yes |
| <a name="input_keyvaults"></a> [keyvaults](#input\_keyvaults) | Map of Key Vault configurations | <pre>map(object({<br>    location                               = string<br>    name                                   = string<br>    resource_group_name                    = string<br>    enabled_for_disk_encryption            = bool<br>    keys                                   = map(any)<br>    network_acls                           = map(string)<br>    wait_for_rbac_before_key_operations    = map(string)<br>    wait_for_rbac_before_secret_operations = map(string)<br>  }))</pre> | n/a | yes |
| <a name="input_log_analytics_workspace"></a> [log\_analytics\_workspace](#input\_log\_analytics\_workspace) | n/a | <pre>object({<br>    name                = string<br>    location            = string<br>    resource_group_name = string<br>  })</pre> | n/a | yes |
| <a name="input_nsgs"></a> [nsgs](#input\_nsgs) | Map of NSGs to create | <pre>map(object({<br>    location            = string<br>    resource_group_name = string<br>    security_rules = map(object({<br>      access                                     = string<br>      description                                = optional(string)<br>      destination_address_prefix                 = optional(string)<br>      destination_address_prefixes               = optional(set(string))<br>      destination_application_security_group_ids = optional(set(string))<br>      destination_port_range                     = optional(string)<br>      destination_port_ranges                    = optional(set(string))<br>      direction                                  = string<br>      name                                       = string<br>      priority                                   = number<br>      protocol                                   = string<br>      source_address_prefix                      = optional(string)<br>      source_address_prefixes                    = optional(set(string))<br>      source_application_security_group_ids      = optional(set(string))<br>      source_port_range                          = optional(string)<br>      source_port_ranges                         = optional(set(string))<br>      timeouts = optional(object({<br>        create = optional(string)<br>        delete = optional(string)<br>        read   = optional(string)<br>        update = optional(string)<br>      }))<br>    }))<br>  }))</pre> | n/a | yes |
| <a name="input_private_endpoint_subnet_key"></a> [private\_endpoint\_subnet\_key](#input\_private\_endpoint\_subnet\_key) | Key for the private endpoint subnet in the domain controller VNet | `string` | n/a | yes |
| <a name="input_recovery_vault_config"></a> [recovery\_vault\_config](#input\_recovery\_vault\_config) | n/a | <pre>object({<br>    name                                           = string<br>    location                                       = string<br>    resource_group_name                            = string<br>    cross_region_restore_enabled                   = bool<br>    alerts_for_all_job_failures_enabled            = bool<br>    alerts_for_critical_operation_failures_enabled = bool<br>    classic_vmware_replication_enabled             = bool<br>    public_network_access_enabled                  = bool<br>    storage_mode_type                              = string<br>    sku                                            = string<br>    managed_identities = object({<br>      system_assigned            = bool<br>      user_assigned_resource_ids = list(string)<br>    })<br>    tags                     = map(string)<br>    workload_backup_policy   = any<br>    vm_backup_policy         = any<br>    file_share_backup_policy = any<br>  })</pre> | n/a | yes |
| <a name="input_route_tables"></a> [route\_tables](#input\_route\_tables) | Map of route table configurations | <pre>map(object({<br>    location            = string<br>    resource_group_name = string<br>    tags                = optional(map(string), {})<br>    subnet_resource_ids = optional(map(string))<br>    routes = map(object({<br>      name                   = string<br>      address_prefix         = string<br>      next_hop_type          = string<br>      next_hop_in_ip_address = optional(string)<br>    }))<br>  }))</pre> | n/a | yes |
| <a name="input_storage_account"></a> [storage\_account](#input\_storage\_account) | n/a | <pre>object({<br>    name                              = string<br>    account_replication_type          = string<br>    location                          = string<br>    resource_group_name               = string<br>    infrastructure_encryption_enabled = bool<br>    container_name                    = string<br>    container_access_type             = string<br>  })</pre> | n/a | yes |
| <a name="input_storage_account_private_dns_zone_resource_id"></a> [storage\_account\_private\_dns\_zone\_resource\_id](#input\_storage\_account\_private\_dns\_zone\_resource\_id) | Resource ID of the Storage Account private DNS zone | `string` | n/a | yes |
| <a name="input_user_assigned_identities"></a> [user\_assigned\_identities](#input\_user\_assigned\_identities) | n/a | <pre>map(object({<br>    name                = string<br>    location            = string<br>    resource_group_name = string<br>  }))</pre> | n/a | yes |
| <a name="input_virtual_machine_configs"></a> [virtual\_machine\_configs](#input\_virtual\_machine\_configs) | n/a | <pre>map(object({<br>    name                               = string<br>    location                           = string<br>    resource_group_name                = string<br>    zone                               = string<br>    encryption_at_host_enabled         = bool<br>    account_credentials_adcredusername = string<br>    generate_admin_password_or_ssh_key = bool<br>    ddms_name                          = string<br>    ddms_storage_account_type          = string<br>    ddms_lun                           = number<br>    ddms_caching                       = string<br>    ddms_disk_size_gb                  = number<br>    os_type                            = string<br>    sku_size                           = string<br>    computer_name                      = string<br>    source_image_reference = object({<br>      publisher = string<br>      offer     = string<br>      sku       = string<br>      version   = string<br>    })<br>    extensions = map(object({<br>      name                       = string<br>      publisher                  = string<br>      type                       = string<br>      type_handler_version       = string<br>      auto_upgrade_minor_version = bool<br>      settings                   = optional(map(any))<br>      protected_settings         = optional(map(any))<br>    }))<br>    network_interfaces = map(object({<br>      name                = string<br>      location            = string<br>      resource_group_name = string<br>      enable_telemetry    = optional(bool, false)<br>      ip_configurations = map(object({<br>        name                          = string<br>        private_ip_subnet_resource_id = string<br>        private_ip_address_allocation = string<br>        private_ip_address            = string<br>      }))<br>      network_security_group_ids = list(string)<br>    }))<br>  }))</pre> | n/a | yes |
| <a name="input_vm_login_username"></a> [vm\_login\_username](#input\_vm\_login\_username) | Default VM admin username for domain controllers | `string` | n/a | yes |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_cc_nsg_info"></a> [cc\_nsg\_info](#output\_cc\_nsg\_info) | info for all NSGs |
| <a name="output_cc_rg_outputs"></a> [cc\_rg\_outputs](#output\_cc\_rg\_outputs) | n/a |
| <a name="output_cc_route_info"></a> [cc\_route\_info](#output\_cc\_route\_info) | info for all route tables info |
| <a name="output_password"></a> [password](#output\_password) | n/a |
| <a name="output_vnet_info"></a> [vnet\_info](#output\_vnet\_info) | Information about all virtual networks |
<!-- END_TF_DOCS -->